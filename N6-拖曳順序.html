<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>第五章</title>
<style>
    body {
        background-image: url('./背景圖/背景圖5.jpg');
        background-size: 1600px 1100px;
        background-position: center;
        background-repeat: no-repeat;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh; /* 使整個 body 高度充滿視窗 */
        margin: 0; /* 清除預設的 body 邊距 */
    }
  .container {
    display: flex;
    flex-direction: column; /* 垂直方向排列子元素 */
    align-items: center; /* 水平置中 */
    width: 300px;
  }
  .target {
    width: 100px;
    height: 100px;
    border: 2px dashed #000;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 10px 0; /* 加入垂直間距 */
    position: absolute; /* 固定位置 */
  }
  .target img {
    max-width: 100%;
    max-height: 100%;
  }
  .buttonclose {
    padding: 25px 25px;
    background-color: transparent;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    background-image: url('./按鈕/叉.png');
    background-size: cover;
    background-position: center;
    text-align: center;
    position: absolute;
    top: 10px;
    left: 10px;
}

.buttonconfirm {
    padding: 15px 30px;
    background-color: transparent;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    background-image: url('./按鈕/確認.png');
    background-size: cover;
    background-position: center;
    text-align: center;
    position: absolute;
    top: 600px;
    left: 150px;
}

</style>
</head>
<body>
    <a href="page05.html"><button class="buttonclose" id="closeModalButton1"></button></a>
    <div class="container">
        <div class="target" data-order="1" style="top: 50px; left: 50px;" ondrop="drop(event)" ondragover="allowDrop(event)" ontouchmove="touchMove(event)" ontouchend="touchEnd(event)"></div>
        <div class="target" data-order="2" style="top: 180px; left: 50px;" ondrop="drop(event)" ondragover="allowDrop(event)" ontouchmove="touchMove(event)" ontouchend="touchEnd(event)"></div>
        <div class="target" data-order="3" style="top: 310px; left: 50px;" ondrop="drop(event)" ondragover="allowDrop(event)" ontouchmove="touchMove(event)" ontouchend="touchEnd(event)"></div>
        <div class="target" data-order="4" style="top: 440px; left: 50px;" ondrop="drop(event)" ondragover="allowDrop(event)" ontouchmove="touchMove(event)" ontouchend="touchEnd(event)"></div>
    </div>
    <div style="display: block;">
        <img src="./程式圖片/N6/Step 02.png" alt="圖片2" draggable="false" ontouchstart="touchStart(event)">
    <br>
    <div style="display: block;">
        <img src="./程式圖片/N6/Step 04.png" alt="圖片4" draggable="false" ontouchstart="touchStart(event)">
    <br>
    <div style="display: block;">
        <img src="./程式圖片/N6/Step 01.png" alt="圖片1" draggable="false" ontouchstart="touchStart(event)">
    <br>
    <div style="display: block;">
        <img src="./程式圖片/N6/Step 03.png" alt="圖片3" draggable="false" ontouchstart="touchStart(event)">
    <br>
    <div style="display: block;">
        <img src="./程式圖片/N6/Step 00.png" alt="圖片錯誤" draggable="false" ontouchstart="touchStart(event)">
    <br>
    <button class="buttonconfirm" id="confirmButton1"></button>

    <script>
        let currentDragItem = null;
        let currentTarget = null;

        function touchStart(event) {
            currentDragItem = event.target;
        }

        function touchMove(event) {
            event.preventDefault();
            const touch = event.touches[0];
            const offsetX = touch.clientX - currentDragItem.width / 2;
            const offsetY = touch.clientY - currentDragItem.height / 2;
            currentDragItem.style.position = 'absolute';
            currentDragItem.style.left = offsetX + 'px';
            currentDragItem.style.top = offsetY + 'px';
        }

        function touchEnd(event) {
            currentDragItem.style.position = 'static';
            const data = currentDragItem.alt;
            const target = currentTarget;

            if (target.classList.contains("target")) {
                const order = target.getAttribute("data-order");
                if (order && currentDragItem) {
                    target.appendChild(currentDragItem);
                }
            }
            currentDragItem = null;
        }

        function allowDrop(event) {
            event.preventDefault();
            currentTarget = event.target;
        }

        function drop(event) {
            event.preventDefault();
            const data = event.dataTransfer.getData("text");
            const target = event.target;

            if (target.classList.contains("target")) {
                const order = target.getAttribute("data-order");
                const img = document.querySelector(`[alt="${data}"]`);

                if (order && img) {
                    target.appendChild(img);
                }
            }
        }

        const confirmButton1 = document.getElementById('confirmButton1');

        confirmButton1.addEventListener('click', () => {
            const target1 = document.querySelector('.target[data-order="1"]');
            const target2 = document.querySelector('.target[data-order="2"]');
            const target3 = document.querySelector('.target[data-order="3"]');
            const target4 = document.querySelector('.target[data-order="4"]');
    
            if (target1.querySelector('img[alt="圖片1"]') &&
                target2.querySelector('img[alt="圖片2"]') &&
                target3.querySelector('img[alt="圖片3"]') &&
                target4.querySelector('img[alt="圖片4"]')) {
                // 正確放置圖片，執行跳轉到另一個HTML
                window.location.href = 'page05-N6.html';
            } else {
                // 將圖片回歸原位
                const images = document.querySelectorAll('img[draggable="true"]');
                images.forEach(img => {
                    img.style.transform = 'translate(0, 0)';
                    document.body.appendChild(img);
                });
    
                // 清空目標位置
                target1.innerHTML = '';
                target2.innerHTML = '';
                target3.innerHTML = '';
                target4.innerHTML = '';
            }
            dragItem = null; // 清除拖曳物品
        });
    </script>
    </body>
    </html>
